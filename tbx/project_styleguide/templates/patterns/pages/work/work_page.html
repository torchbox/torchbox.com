{% extends "patterns/pages/work/work_page_base.html" %}
{% load wagtailcore_tags wagtailimages_tags static %}

{% block intro %}
    {% if page.intro %}
        <div class="streamfield__intro heading heading--four">
            {{ page.intro|richtext }}
        </div>
    {% endif %}
{% endblock %}

{% block main_image %}
    {% if page.remove_desaturation_on_header_image %}
        {% image page.header_image fill-1600x700 format-webp as desktop_image %}
        {% image page.header_image fill-1280x560 format-webp as desktop_image_retina %}
        {% image page.header_image fill-400x225 format-webp as mobile_image %}
        {% image page.header_image fill-800x450 format-webp as mobile_image_retina %}
    {% else %}
        {% image page.header_image fill-1600x700 format-webp saturation-0.6 as desktop_image %}
        {% image page.header_image fill-1280x560 format-webp saturation-0.6 as desktop_image_retina %}
        {% image page.header_image fill-400x225 format-webp saturation-0.6 as mobile_image %}
        {% image page.header_image fill-800x450 format-webp saturation-0.6 as mobile_image_retina %}
    {% endif %}

    <div class="grid">
        <div class="grid__work-image">

            <picture>
                <source media="(max-width: 598px)" srcset="{{ mobile_image.url }} 1x, {{ mobile_image_retina.url }} 2x" />
                <source media="(min-width: 599px)" srcset="{{ desktop_image.url }} 1x, {{ desktop_image_retina.url }} 2x" />
                <img src="{{ desktop_image.url }}" alt="{{ page.header_image.alt }}" loading="lazy" />
            </picture>

            {% if page.header_caption %}
                <p class="image__caption supporting">{{ page.header_caption }}</p>
            {% endif %}

            {% if page.header_attribution %}
                <p class="image__attribution supporting">{{ page.header_attribution }}</p>
            {% endif %}
        </div>
    </div>
{% endblock %}

{% block body_streamfield %}
    {# see work_section_block.html #}
    {% include_block page.body %}
{% endblock %}
