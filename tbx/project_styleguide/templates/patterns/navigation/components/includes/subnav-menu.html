{% load wagtailcore_tags %}

<div class="sub-nav sub-nav--{{ number }}">
    <ul class="sub-nav__list">
        {% for link in links %}
            <li class="sub-nav__item">
                {% with children=link.get_children.live.public.in_menu %}
                    <a
                        class="sub-nav__link {% if children and not hide_children %}sub-nav__link--has-children{% else %}sub-nav__link--no-children{% endif %}"
                        href="{{ link.url }}"
                    >
                        {{ link.title }}
                    </a>
                    {% include "patterns/navigation/components/includes/subnav-child-menu.html" with pages=children %}
                {% endwith %}
            </li>
        {% endfor %}
    </ul>
</div>

