{% load wagtailcore_tags %}

{% if page.get_ancestors|length > 1 %}
    <nav aria-label="breadcrumb" class="breadcrumbs-nav">
        <ul class="breadcrumbs-nav__list">
            {% with parent_page=page.get_parent %}
                {% for ancestor_page in page.get_ancestors %}
                    {% if not ancestor_page.is_root %}
                        <li class="breadcrumbs-nav__item {% if ancestor_page == parent_page or ancestor_page.pattern_library_is_parent %}breadcrumbs-nav__item--parent{% else %}breadcrumbs-nav__item--ancestor{% endif %}">
                            <a href="{% pageurl ancestor_page %}" class="breadcrumbs-nav__link">{{ ancestor_page.title }}</a>
                            <span aria-hidden="true" class="breadcrumbs-nav__divider">/</span>
                        </li>
                    {% endif %}
                {% endfor %}
            {% endwith %}
            <li class="breadcrumbs-nav__item breadcrumbs-nav__item--current">{{ page.title }}</li>
        </ul>
    </nav>
{% endif %}
