{% load wagtailimages_tags %}

<div class="grid__event event-block">
    <div class="event-block__content">
        <a class="event-block__title" href="#" aria-label="{{ value.title }}">
            <h2>
                {{ value.title }}
                {% include "patterns/atoms/icons/icon.html" with name="arrow-wide" classname="listing-avatar__arrow listing__arrow" %}
            </h2>
        </a>
        <div class="event-block__meta">
            <div class="event-block__meta-item">
                {% include "patterns/atoms/icons/icon.html" with name="calendar" classname="event-block__meta-item-icon" %}
                <div class="event-block__meta-item-content">
                    <span class="event-block__meta-item-title">Event type</span>
                    <span class="event-block__meta-item-value">{{ value.event_type }}</span>
                </div>
            </div>
            <div class="event-block__meta-item">
                <div class="event-block__meta-item-content">
                    <span class="event-block__meta-item-title">When</span>
                    <span class="event-block__meta-item-value">12 Mar 2024, 2-4pm</span>
                </div>
            </div>
            <div class="event-block__meta-item">
                <div class="event-block__meta-item-content">
                    <span class="event-block__meta-item-title">Where</span>
                    <span class="event-block__meta-item-value">Zoom, Bristol</span>
                </div>
            </div>
        </div>
        {% if value.secondary_link %}
            <hr class="event-block__divider" />
            {% with secondary_link=value.secondary_link.0.value %}
                <a href="{{ secondary_link.url }}" class="event-block__link">{{ secondary_link.text }}</a>
            {% endwith %}
        {% endif %}
    </div>
    {% image value.image fill-430x320 as mobile_image %}
    {% image value.image fill-860x640 as mobile_image_retina %}
    {% image value.image fill-525x510 as desktop_image %}
    {% image value.image fill-1050x1020 as desktop_image_retina %}
    <picture class="event-block__picture">
        <source media="(max-width: 598px)" srcset="{{ mobile_image.url }} 1x, {{ mobile_image_retina.url }} 2x" />
        <source media="(min-width: 599px)" srcset="{{ desktop_image.url }} 1x, {{ desktop_image_retina.url }} 2x" />
        <img src="{{ desktop_image.url }}" alt="" loading="lazy" class="event-block__image" />
    </picture>
</div>
