{% load wagtailcore_tags wagtailimages_tags %}
<div class="grid__keypoints keypoints">
    <div class="keypoints__header">
        {% if value.title %}
            <h2 class="motif-heading motif-heading--half-width">{{ value.title }}</h2>
        {% endif %}
        {% if value.intro %}
            <div class="rich-text">{{ value.intro|richtext }}</div>
        {% endif %}
    </div>

    <ul class="keypoints__list">
        {% for key_point in value.key_points %}
            <li class="keypoints__item">
                <div class="keypoints__wrapper">
                    <p class="keypoints__label">{{ key_point.icon_label }}</p>
                    {% include "patterns/atoms/icons/icon.html" with name=key_point.icon classname="keypoints__icon" %}
                </div>
                {% if key_point.heading %}
                        {# header title is optional, so heading here may be h2 #}
                    {% with value.title|yesno:"h3,h2" as HTAG %}
                        <{{ HTAG }} class="keypoints__heading">
                        {{ key_point.heading }}
                        </{{ HTAG }}>
                    {% endwith %}
                {% endif %}
                <div class="keypoints__description">{{ key_point.description|richtext }}</div>
            </li>
        {% endfor %}
    </ul>
</div>
