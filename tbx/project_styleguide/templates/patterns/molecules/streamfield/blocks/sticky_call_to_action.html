{% load wagtailcore_tags %}
{# call_to_action is a required field (streamblock) in the block definition #}

<!-- Sticky block -->
<div class="call-to-action__sticky">
    <div class="call-to-action__inner">
        {% if value.get_button_link_block.block_type == "modal_iframe" %}
            <button class="call-to-action__stickybutton button" data-micromodal-trigger="iframe-embed-modal">
                <span class="call-to-action__stickyheading">{{ value.sticky_text }}</span>
                {% if value.sticky_subtext %}
                    <br><span class="call-to-action__stickysubtext">{{ value.sticky_subtext }}</span>
                {% endif %}
            </button>
        {% else %}
            <a href="{{ value.get_button_link }}" class="call-to-action__button button">
                <span class="call-to-action__stickyheading">{{ value.sticky_text }}</span>
                {% if value.get_button_link_block.block_type == "document_link" %}
                    ({{ value.get_button_file_size|filesizeformat }})
                {% endif %}
                {% if value.sticky_subtext %}
                    <br><span class="call-to-action__stickysubtext">{{ value.sticky_subtext }}</span>
                {% endif %}
            </a>
        {% endif %}
    </div>
</div>

{% if value.get_button_link_block.block_type == "modal_iframe" %}
    <!-- Modal content -->
    <div class="modal" id="iframe-embed-modal" aria-hidden="true">
        <div class="modal__overlay" tabindex="-1" data-micromodal-close></div>
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-title" >
            <header class="modal__header">
                <h2 class="modal__heading heading heading--two" id="modal-title">Service Enquiry</h2>
                <div class="modal__close">
                    {% include "patterns/atoms/icon_buttons/icon_button.html" with modifier="close" data="data-micromodal-close" aria='aria-label="Close modal"' %}
                </div>
            </header>
            <main class="modal__content" id="filters-content">
                <iframe
                    src="{{ value.get_button_link }}"
                    width="100%"
                    height="650px"
                    frameborder="0"
                    title="Modal Webform">
                </iframe>
            </main>
        </div>
    </div>
{% endif %}